---
title: "Project proposal"
author: "Team name"
output: github_document
---

```{r load-packages, message = FALSE}
library(tidyverse)
library(broom)
library(readxl)
## Add any additional packages you are using here
```

## 1. Introduction

Our data comes from a dataset showcasing various variables regarding energy for each US state from 1960-2019 from the U.S. Energy Information Administration. Our data is specifically the 2019 data for each state from that dataset. The variables for energy cover the consumption, expenditure, and price of a variety of different energy sources and industries for each state. 

Research Question: 
What are the overall trends that are shown in US energy consumption, expenditure, and price?
Per capita consumption, regional price, regional consumption, etc.


## 2. Data

Text goes here. Place your data in the /data folder, and add dimensions and codebook to the README in that folder. Then print out the output of glimpse() or skim() of your data frame.

```{r}
setwd("/cloud/project")

energy <- read_csv("data/energy.csv")
filtered_energy <- energy %>%
  filter(Year == 2019) %>%
  select(State, Year, starts_with(c("Consumption", "Expenditure", "Price")))

population <- read_excel("data/Population.xlsx")
filtered_population <- population[c(-(1:8),-(60:66)),] %>%
  rename(Population = "...13",
         State = "table with row headers in column A and column headers in rows 3 through 4. (leading dots indicate sub-parts)") %>%
  mutate(State = substr(State, 2, nchar(State))) %>%
  select(State, Population)

joined <- filtered_energy %>%
  left_join(filtered_population, by = c("State" = "State"))

variables <- colnames(joined)
variables <- variables[-c(1:2,84)]

per_cap <- joined %>%
  mutate(across(variables, ~ .x / joined$Population))

for (var in variables) {
  per_cap[[paste0(var, "_pc")]] <- per_cap[[var]]
}

per_cap <- per_cap %>%
  select(State, Year, ends_with("pc"))

final <- joined %>%
  left_join(per_cap, by = c("State" = "State"))

# Print the output of glimpse() or skim()
glimpse(final)
```

## 3. Data analysis plan

Text goes here.
- What variables will you visualize to explore your research questions?
- Will there be any other data that you need to find to help with your research question?
- Very preliminary exploratory data analysis, including some summary statistics and visualizations, along with some explanation on how they help you learn more about your data. (You can add to these later as you work on your project.)
- The data visualization(s) that you believe will be useful in exploring your question(s). (You can update these later as you work on your project.)


```{r}
# Code goes here
# Code to calculate summary statistics
# Code for a visualization
```
